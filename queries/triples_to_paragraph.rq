
SELECT ?s (CONCAT("<", ?s_str, ">", " ", GROUP_CONCAT(?po_str; separator=',\\n'), " .\\n") AS ?text)
WHERE {
    ?s ?p ?o .
    FILTER(?p NOT IN (rdfs:label))
    OPTIONAL {?s rdfs:label ?s_label}
    OPTIONAL {?p rdfs:label ?p_label}
    OPTIONAL {?o rdfs:label ?o_label}
    BIND(COALESCE(?s_label, STR(?s)) AS ?s_str)
    BIND(IF(?p = rdf:type, "is a", COALESCE(?p_label, STR(?p))) AS ?p_str)
    BIND(IF(isLiteral(?o), STR(?o), COALESCE(?o_label, STR(?o))) AS ?o_str)

    BIND(CONCAT("<", ?p_str, "> <", ?o_str, "> ") AS ?po_str)

} GROUP BY ?s
